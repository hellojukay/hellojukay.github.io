---
title: 快速删除 artifactory 删的过期文件
date: 2024-07-10
---

首先我们需要安装安装 artifactory 的命令行工具， jfrog cli , 网址是 https://github.com/jfrog/jfrog-cli 。

我们需要写一个 artifactory 的查询脚本， 查询出所有的过期文件, 下面这个脚本是查询出 2016-10-18T21:26:52.000Z 之前的文件。
```txt
{
  "files": [
    {
      "aql": {
        "items.find": {
          "repo": "foobar",
          "$or": [
            {
              "$and": [
                {
                  "modified": { "$lt": "2016-10-18T21:26:52.000Z"}
                }
              ]
            }
          ]
        }
      }
    }
  ]
}
```
我们也可以使用相对日期
```txt
"modified": { "$before":"6mo" }
```

然后我们使用 jfrog cli 命令行工具， 执行删除
```bash
jfrog rt del --spec /tmp/foo.spec --dry-run
```

原文地址: https://stackoverflow.com/questions/40118550/artifactory-delete-all-artifacts-older-than-6-months